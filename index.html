<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Form Verfication</title>
</head>
<body>
    <div class="container">
        
      <div class="row">
        <div class="col-md-6 bg-dark rounded-left">
          <h1 class="display-4 text-light text-center mt-4 mb-4">Welcome Adventurer!</h1>
          <p class="text-center text-white">Are you ready to do lots of cool stuff? Look no further, you're in the right place. Create an account and dive on in.</p>
        </div>
        <div class="col-md-6 bg-light rounded-right">
          <h1 class="display-4 text-center m-4">Create an Account</h1>
          <p class="text-center">Complete the required fields then click SUBMIT.
          <form>
            <div class="form-group">
                <label for="fname">First Name:</label>
                <input class="form-control" type="text" id="fname">
            </div>
            <div class="form-group">
                <label for="lname">Last Name:</label>
                <input class="form-control" type="text" id="lname">
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input class="form-control" type="text" id="email" placeholder="abc@example.com">
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input class="form-control" type="password" id="password">
            </div>
            <div class="form-group">
              <label for="confirm-password">Confirm password:</label>
              <input class="form-control" type="password" id="confirm-password">
            </div>
            <div class="form-group">
              <button class="form-control btn-secondary" type="submit" id="submit">SUBMIT</button>
            </div>
          </form>
        </div> 
      </div>
    </div>
    <script>

      // SET SUBMIT BUTTON TO BE DISABLED BY DEFAULT

      document.getElementById('submit').disabled = true;

  

      // VALIDATE FIELDS WITH 'REQUIRED' MESSAGE

      // Add event listeners to input fields
      let inputs = document.querySelectorAll('.form-control');
      inputs.forEach((input) => input.addEventListener('blur', function (e) {

        // If nothing is entered AND there's currently no message saying 'Required'
        if (!e.target.value && !e.target.nextElementSibling) {
          // Then display 'Required' message
          e.target.insertAdjacentHTML('afterEnd', "<span class='text-danger'>Required</span>");
        } 

        // If nothing is entered AND there is a message saying 'Required'
        if (!e.target.value && e.target.nextElementSibling.innerText === 'Required') {
          // Continue to display message
            e.target.nextElementSibling.display = 'block';
        } else if (e.target.nextElementSibling) {
          // Otherwise, something must've been entered so remove the message
          e.target.nextElementSibling.remove();
        }
      }))


      // VALIDATE PASSWORD AND CONFIRM PASSWORD SO THAT THE ENTERED VALUES MATCH AND ARE VALID

      // Add event listeners to both password field
      let passwordInputs = document.querySelectorAll('[type="password"]');
      passwordInputs.forEach((input) => input.addEventListener('blur', function (e) {

        let pass = document.getElementById('password');
        let confirmPass = document.getElementById('confirm-password');

        // Checking if they match
        if (pass.value && confirmPass.value && pass.value !== confirmPass.value) {
          if (e.target.nextElementSibling) {
            e.target.nextElementSibling.remove();
          } else if (!confirmPass.nextElementSibling) {
            confirmPass.insertAdjacentHTML('afterEnd', "<span class='text-danger'>Passwords must match</span>");
          }
        } else if (pass.value === '' || confirmPass.value === '' && confirmPass.innerText === 'Passwords must match') {
            confirmPass.nextElementSibling.remove();
        }

        // Checking if both are valid
        if (pass.value && confirmPass.value && pass.value === confirmPass.value) {
          let regex = /^./gi
        }
      }))


      // VALIDATE EMAIL TO ENSURE CORRECT FORMAT - ABC@EXAMPLE.COM

      // Add event listener to email
      document.getElementById('email').addEventListener('blur', function(e) {
        let regex = /(\w+)@(\w+)\.(\w+)/ig;
        if (e.target.value) {
          if(!regex.test(e.target.value) && !e.target.nextElementSibling) {
          e.target.insertAdjacentHTML('afterEnd', "<span class='text-danger'>Enter valid address: abc@example.com</span>");
        } else if (!regex.test(e.target.value) && e.target.nextElementSibling) {
          e.target.nextElementSibling.innerText = 'Enter valid address: abc@example.com';
          }
        }
        // Note: if valid address is entered, any error messages are removed by event listener that gives 'Required' error message
      })
    </script>
</body>
</html>